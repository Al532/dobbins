/* =========================================================
BASE GÉNÉRALE
========================================================= */
body{
  margin:0;
  display:flex;
  height:100vh;
  font-family:sans-serif;
  color:#222;
  background:#fff8f3;
}

/* Sommaire intégré */
#toc{
  background:#f3e9e3;
  border:1px solid #e0cfc2;
  border-radius:8px;
  margin-bottom:20px;
  padding:10px 15px 5px 15px;
  max-width:400px;
  box-shadow:0 1px 4px #0001;
  overflow:hidden;
  position:relative;
}
#toc h2{font-size:1.1em;margin-top:0;color:#A64B3C;}
#toc ul{list-style:none;padding-left:0;}
#toc li{margin:5px 0;}
#toc a{color:#A64B3C;text-decoration:none;font-size:.95em;}
#toc a:hover{color:#733022;text-decoration:underline;}

/* Zone texte */
.content{
  flex:1;
  min-width:200px;
  max-width:600px;
  overflow-y:auto;
  padding:20px;
  background:#fff;
}

/* Zone image / PDF */
.sidebar{
  flex:1.3;
  min-width:400px;
  background-size:contain;
  background-repeat:no-repeat;
  background-position:center;
  background-color:#fff;
}

/* Images insérées dans le texte */
.content img{
  width:100%;
  height:auto;
  display:block;
  margin:10px 0;
}

/* =========================================================
LECTEUR AUDIO PERSONNALISÉ
========================================================= */
.audio-player{
  display:flex;
  align-items:center;
  gap:10px;
  margin:10px 0;
  background:#f8f6f3;
  border-radius:16px;
  padding:4px 12px 4px 6px;
  box-shadow:0 1px 3px #0001;
}
.play-btn{
  background:none;
  border:none;
  font-size:20px;
  cursor:pointer;
  height:1.2em;
  line-height:1;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#A64B3C;
  transition:color .2s;
}
.play-btn:hover{color:#733022;}
.audio-label{
  flex:1;
  font-style:italic;
  font-size:.95em;
  color:#5A1F1F;
  margin-left:4px;
}
.audio-controls{display:flex;align-items:center;gap:5px;}
.progress{
  width:150px;
  height:5px;
  background:#e0cfc2;
  cursor:pointer;
  position:relative;
  border-radius:3px;
  overflow:hidden;
  margin:0 4px;
}
.progress-filled{
  display:block;            /* <-- correction ajoutée */
  height:100%;
  width:0;
  background:#A64B3C;
  transition:width .15s linear;
  border-radius:3px;
}
.audio-player audio{display:none !important;}

/* =========================================================
VIEWER PDF EN SIDEBAR
========================================================= */
.sidebar-pdf-viewer{
  position:relative;
  width:100%;
  height:100%;
  background:none;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:200px;
}

.sidebar-pdf-canvas{
  max-width:100%;
  max-height:100%;
  display:block;
  margin:auto;
}

/* --- BOUTONS DE NAVIGATION --- */
.sidebar-pdf-btn{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background:#f3e9e3cc;
  border:none;
  color:#A64B3C;
  font-size:2.2em;
  width:36px;
  height:48px;
  border-radius:8px;
  cursor:pointer;
  opacity:0;
  transition:opacity .2s,background .2s,color .2s;
  z-index:2;
  display:flex;
  align-items:center;
  justify-content:center;
  user-select:none;
}
.sidebar-pdf-btn.prev{left:10px;}
.sidebar-pdf-btn.next{right:10px;}
.sidebar-pdf-btn:hover{
  background:#e0cfc2;
  color:#733022;
}
.sidebar-pdf-viewer:hover .sidebar-pdf-btn{opacity:1;}

@media(hover:none){
  .sidebar-pdf-btn{opacity:1;}
}

/* =========================================================
TITRES, LIENS
========================================================= */
h1{color:#A64B3C;}
h2{margin-top:80px;font-size:2.2em;color:#5A1F1F;}
h3{margin-top:50px;color:#A64B3C;}
a{color:#A64B3C;}
a:hover{color:#733022;}

/* =========================================================
RÉPONSIVE
========================================================= */

/* Réduction de la barre audio sur petits écrans */
@media(max-width:800px){
  .progress{width:120px;}
}

/* Portrait : la sidebar passe dessous */
@media(max-width:768px) and (orientation:portrait){
  body{flex-direction:column;}
  .content{max-width:none;width:100%;min-height:40vh;}
  .sidebar{width:100%;min-height:40vh;}
}

/* Paysage : la sidebar reste à côté */
@media(max-width:768px) and (orientation:landscape){
  body{flex-direction:row;}
  .content{width:65%;min-height:40vh;max-width:100%;}
  .sidebar{width:35%;min-height:40vh;}
}
